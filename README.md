# GardenDAO Forks Wallet Server Side and API Intro

This is documentation of the server-side Forks Wallet system, including its API.

The server will be implemented initially in Python using the light API-friendly framework fastapi (https://github.com/tiangolo/fastapi).


Private keys and seed words are created in the local client, e.g. mobile app or browser extension, and must never be transmitted to or generated by the server.

Blockchain ID: tbd, integer/enum which indicates blockchain a transaction is related to‚Ä¶ Needs to cover, Chia mainnet, various testnets, Chia forks and their respective testnets; for now id 1 is Chia Mainnet. May use several-letter code of wallet prefix, e.g. "xch"

TODO: API versioning approach, using fastapi?

possible Forks Wallet Server API servicing domain name: api.forkswallet.gardendao.org


## Install

Requires redis, e.g. sudo apt-get install redis

```
git clone https://github.com/GardenDAO/forks-wallet-server-api
# change config.py

pip install -r requirements.txt
uvicorn openapi:app
```


## dev
c. Run python3 -m venv venv to create a virtual environment.

d. Run . ./venv/bin/activate to activate the virtual environment.

e. Run pip install .. This will take a few minutes.

uvicorn openapi:app --reload

point browser to

http://127.0.0.1:8000/

### Response Format

JSON, request & response format, similar approach to exchange API replies, review their structure, might be { success: true, reponse: {} } or { succcess: false, error: {} }

### SendTx (POST)

Receive Transaction from client, log as appropriate, submit to the appropriate blockchain network, and return a response code.

    Input
    tx - Transaction Bundle (POST body)
    blockchainID - which blockchain to submit to, e.g. Chia, testnets, etc.
    Output
    response: A boolean indicate if the operation succeeded
    info: Some blockchain information, like transaction id; error code if error encountered, need to review standard api approach on this quickly again

### GetTx

Given a date range, get all transactions during that range.

    Input
    address: wallet address
    Start Date: Start date of the query
    End Date: End date of the query
    Output
    A list of transactions

### GetBalance

Get current balance of a wallet address

    Input
    address: wallet address
    blockchainID: which blockchain
    [ future expansion: token list (optional): default is primary token of the blockchain ]
    Output
    address
    blockchainID
    balance: dictionary list of balances requested with amounts in integer of lowest denomination of the token, e.g. mojos for XCH { ‚ÄúXCH‚Äù: 1000 }

[ GetBalances - possibly later]

Get current balance of a list of  wallet addresses

    Input
    addresses: list of wallet addresses
    blockchainID: which blockchain
    [ future expansion: token list (optional): default is primary token of the blockchain ]
    Output
    blockchainID
    balance: dictionary list of balances requested with amounts in integer of lowest denomination of the token, e.g. mojos for XCH { ‚ÄúXCH‚Äù: 1000 }
    Rate Limiting
    TBD: at some point look at if rate limiting needs to be looked at

## Adding Support For New Blockchains

TBD: These are the steps for adding support for an additional blockchain / chia fork

    create enum value for Blockchain ID
    integration of api calls to the blockchain‚Äôs software
    integration testing



### References/Resources

https://github.com/Chia-Network/chia-dev-tools

https://github.com/Chia-Network/chia-blockchain/wiki/RPC-Interfaces

https://chialisp.com/docs/tutorials/structure_of_a_chia_application


## GobyWallet Thanks

Thanks to the contributions of [Chia Mine](https://github.com/Chia-Mine/clvm-js), MetaMask and DeBank to crypto, we stand on your shoulders to complete this project. (üå±, üå±)
